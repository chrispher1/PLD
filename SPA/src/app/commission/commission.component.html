
<div class="col-sm-12">
  <div class="tab-panel">
    <tabset>
      <tab heading="All Transaction">
        <h4>under construction</h4>
      </tab>
      <tab heading="Error">
          <div class="row">&nbsp;</div>
          <form #form="ngForm" (ngSubmit) = "loadCommissionError()" novalidate>
              <div class="row">
                  <div class="col-sm-3 text-right">Carrier</div>
                  <div class="col-sm-9">
                      <select [(ngModel)]="commissionErrorSearchParam.carrier" name="commissionErrorSearchParam.carrier">
                        <option  [ngValue]="-1" >Select a carrier</option>
                        <option *ngFor="let carrier of carrierErrorList" [ngValue]="carrier.carrId">{{carrier.name}}</option>
                      </select>
                  </div>   
                </div>
                <div class="row">
                  <div class="col-sm-3 text-right">Product</div>
                  <div class="col-sm-9">                    
                      <select [(ngModel)]="commissionErrorSearchParam.product" name="commissionErrorSearchParam.product">
                        <option  [ngValue]="-1" >Select a product</option>
                        <option *ngFor="let product of productErrorList" [ngValue]="product.prodId">{{product.name}}</option>
                      </select>
                  </div>   
                </div>
                <div class="row">
                  <div class="col-sm-3 text-right">Policy Number</div>
                  <div class="col-sm-9">
                      <input type="text" name="PolicyNumber" [(ngModel)]="commissionErrorSearchParam.policyNumber">                
                  </div>   
              </div>   
              <div class="row">
                <div class="col-sm-3 text-right">Policy Year</div>
                <div class="col-sm-9">
                    <input type="number" name="policyYearMin" [(ngModel)]="commissionErrorSearchParam.policyYearMin">
                    &nbsp;
                    <input type="number" name="policyYearMax" [(ngModel)]="commissionErrorSearchParam.policyYearMax">
                </div>   
            </div>   
            <div class="row">
              <div class="col-sm-3 text-right">Activity</div>
              <div class="col-sm-9">
                  <select [(ngModel)]="commissionErrorSearchParam.activity" name="commissionErrorSearchParam.activity">
                    <option  [ngValue]="-1" >Select an activity</option>
                    <option *ngFor="let activity of activityErrorList" [ngValue]="activity.actCd">{{activity.descTxt}}</option>
                  </select>
              </div>   
            </div> 
            <div class="row">
              <div class="col-sm-3 text-right">Gross Premium Amount</div>
              <div class="col-sm-9">
                  <input type="number" name="grossPremiumAmountErrorMin" [(ngModel)]="commissionErrorSearchParam.grossPremiumAmountMin">
                  &nbsp;
                  <input type="number" name="grossPremiumAmountErrorMax" [(ngModel)]="commissionErrorSearchParam.grossPremiumAmountMax">
              </div>   
            </div>
            <div class="row">
              <div class="col-sm-3 text-right">Commission Premium Amount</div>
              <div class="col-sm-9">
                  <input type="number" name="commissionPremiumAmountErrorMin" [(ngModel)]="commissionErrorSearchParam.commissionPremiumAmountMin">
                  &nbsp;
                  <input type="number" name="commissionPremiumAmountErrorMax" [(ngModel)]="commissionErrorSearchParam.commissionPremiumAmountMax">
              </div>   
            </div>
            <div class="row">
              <div class="col-sm-3 text-right">Commission Rate</div>
              <div class="col-sm-9">
                  <input type="number" name="commissionRateErrorMin" [(ngModel)]="commissionErrorSearchParam.commissionRateMin">
                  &nbsp;
                  <input type="number" name="commissionRateErrorMax" [(ngModel)]="commissionErrorSearchParam.commissionRateMax">
              </div>   
            </div>
            <div class="row">
              <div class="col-sm-3 text-right">Commission Amount</div>
              <div class="col-sm-9">
                  <input type="number" name="commissionAmountErrorMin" [(ngModel)]="commissionErrorSearchParam.commissionAmountMin">
                  &nbsp;
                  <input type="number" name="commissionAmountErrorMax" [(ngModel)]="commissionErrorSearchParam.commissionAmountMax">
              </div>   
            </div>
            <div class="row">
              <div class="col-sm-3 text-right">Status</div>
              <div class="col-sm-9">
                  <select [(ngModel)] ="commissionErrorSearchParam.status" name="commissionErrorSearchParam.status">
                    <option  [ngValue]="-1" >Select a status</option>
                    <option *ngFor="let status of statusErrorList" [ngValue]="status.statCd">{{status.descTxt}}</option>
                  </select>
              </div>   
            </div>         
                <div class="row">
                    <div class="col-sm-3 text-right">Transaction Date</div>
                    <div class="col-sm-9">
                        <input type="date" name="transactionDateMin" [(ngModel)]="commissionErrorSearchParam.transactionDateMin">
                        &nbsp;
                        <input type="date" name="transactionDateMax" [(ngModel)]="commissionErrorSearchParam.transactionDateMax">
                    </div>   
                </div>
                <div class="row mt-2">
                  <div class="col-sm-3 text-right"></div>
                  <div class="col-sm-9">
                    <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i> Search</button>&nbsp;
                    <button type="button" class="btn btn-info" (click)="commissionErrorResetFilter()"><i class="fa fa-undo"></i> Reset</button>                    
                  </div>
                </div>
          </form>
          <div class="row mt-3">
              <div class="col-lg-12 col-md-3 col-sm-6">
                  <button type="button" class="btn btn-info" (click)="openModalWithComponent($event, 'New', null, 1)"><i class="fa fa-pencil"></i> New</button>&nbsp;
                  <button type="button" class="btn btn-info" (click)="openCommissionErrorMultiDeleteModal(templateCommissionErrorDelete)"><i class="fa fa-trash"></i> Multi Delete</button>&nbsp;
                  <button type="button" class="btn btn-info" (click) ="exportAsXLSX()"><i class="fa fa-table" ></i> Export</button>

                </div>
              <div class="col-lg-12 col-md-3 col-sm-6">
                <table>  
                  <tr> 
                      <th></th>
                      <th></th>
                      <th>
                          <label class="container">
                          <input type="checkbox" 
                            name="AllCommissionErrorCheckbox"                           
                            (change)="allCommissionError($event)" #AllCommissionErrorCheckbox />
                          </label>
                      </th>                          
                      <th>Carrier</th>
                      <th>Product</th>
                      <th>Policy Number</th> 
                      <th>Policy Year</th>                         
                      <th>Activity</th>   
                      <th>Gross Premium Amount</th>   
                      <th>Commission Premium Amount</th>                         
                      <th>Commission Rate</th>
                      <th>Commission Amount</th>   
                      <th>Status Code</th>                         
                      <th>Modified Date</th>
                      <th>Modified By</th>
                  </tr>          
                  <tr *ngFor = "let commissionError of commissionErrorList">                    
                    <td>
                      <button type="button" class="btn" (click)="openModalWithComponent($event, 'Edit', commissionError, 2)" title="Edit"><i class="fa fa-edit"></i></button>
                    </td>
                    <td>
                        <button type="button" class="btn" (click)="openCommissionErrorDeleteModal(templateCommissionErrorDelete, commissionError)" title="Delete"><i class="fa fa-trash"></i></button>
                    </td>
                    <td>
                        <label class="container">
                      <input type="checkbox" name="isDeleted" [(ngModel)]="commissionError.isDeleted" (change)="commissionErrorItemSelected()" />
                        </label>
                    </td>
                    <td>
                      {{commissionError.carr.name}}
                    </td>
                    <td>
                      {{commissionError.prod.name}}
                    </td>                   
                    <td>
                        {{commissionError.polNum}}                     
                    </td>
                    <td>
                      {{commissionError.yrNum}}
                    </td>                    
                    <td>
                      {{commissionError.actCdNavigation.descTxt}}
                    </td>
                    <td>
                      {{commissionError.grsPremAmt | number:'1.2'}}
                    </td>
                    <td>
                      {{commissionError.commPremAmt| number:'1.2'}}
                    </td>
                    <td>
                      {{commissionError.commRt}}
                    </td>
                    <td>
                      {{commissionError.commAmt | number:'1.2'}}
                    </td>
                    <td> 
                      {{commissionError.statCdNavigation.descTxt}}
                    </td>                     
                    <td>
                      {{commissionError.modDt | date :'MM/dd/yyyy h:mm:ss a '}}
                    </td>
                    <td>
                      {{commissionError.modById}}
                    </td>                 
                  </tr>
                </table>                
              </div>
              <div class="col-lg-12 col-md-3 col-sm-6">
                <pagination [boundaryLinks]="true" 
                [totalItems]="paginationcommissionError.totalItems"
                [itemsPerPage]="paginationcommissionError.itemsPerPage"
                [(ngModel)]="paginationcommissionError.currentPage"
                (pageChanged)="pageChanged($event)"
                previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;">     
                </pagination>
              </div>
            </div>
      </tab>
      <tab heading="Final">
        <h4>under construction</h4>
      </tab>
      
    </tabset>
  </div>
</div>
<ng-template #templateCommissionErrorDelete>
    <div class="modal-body text-center">
      <p>Are you sure you want to delete this record?</p>
      <button type="button" class="btn btn-info" (click)="confirm()" >Yes</button>&nbsp;
      <button type="button" class="btn btn-primary" (click)="decline()" >No</button>
    </div>
  </ng-template>